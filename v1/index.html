<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <svg width="960" height="500"></svg>
    <script src="//d3js.org/d3.v4.min.js"></script>
    <script>
        var svg = d3.select("svg"),
            width = +svg.attr("width"),
            height = +svg.attr("height");

        var simulation = d3.forceSimulation()
            .force("charge", d3.forceManyBody().strength(-200))
            .force("link", d3.forceLink().id(function(d) {
                return d.id;
            }).distance(40))
            .force("x", d3.forceX(width / 2))
            .force("y", d3.forceY(height / 2))
            .on("tick", ticked);

        var link = svg.selectAll(".link"),
            node = svg.selectAll(".node");

        d3.json("data.json", function(error, graph) {
            if (error) throw error;

            var rScale = d3.scaleLinear()
                .domain([0, 1237])
                .range([6, 40])
            
            simulation.nodes(graph.nodes);
            simulation.force("link").links(graph.links);

            link = link
                .data(graph.links)
                .enter().append("line")
                .attr("class", function(d) { return d.class; });

            node = node
                .data(graph.nodes)
                .enter().append("circle")
                .attr("class", function(d) { return d.class; })
                .attr("id", function(d) {
                    return d.team;
                })
                .attr('r', function(d) { return rScale(d.wins); });
        });

        function ticked() {
            link.attr("x1", function(d) {
                    return d.source.x;
                })
                .attr("y1", function(d) {
                    return d.source.y;
                })
                .attr("x2", function(d) {
                    return d.target.x;
                })
                .attr("y2", function(d) {
                    return d.target.y;
                });

            node.attr("cx", function(d) {
                    return d.x;
                })
                .attr("cy", function(d) {
                    return d.y;
                });
        }
    </script>
</body>

</html>